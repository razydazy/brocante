{%- liquid
  assign section_color = section.settings.color_scheme
  assign text = section.settings.text
  assign link = section.settings.link
-%}

{%- if section.settings.home_page_only == false or template.name == 'index' -%}
  {%- if link != blank -%}
    <a class="block text-sm font-secondary bg-scheme-background text-scheme-text hover:text-scheme-accent text-center py-2 lg:py-4 section-x-padding" href="{{ link }}" data-color-scheme="{{ section_color }}">
      {{ text | escape }}
    </a>
  {%- else -%}
    <div class="relative text-sm font-secondary bg-scheme-background text-scheme-text text-center py-2 lg:py-4" role="complementary" data-color-scheme="{{ section_color }}">
      <p class="section-x-padding">{{ text | escape }}</p>
    </div>
  {%- endif -%}
{%- endif -%}

{% schema %}
  {
    "name": "Announcement bar",
    "settings": [
      {
        "type": "checkbox",
        "id": "home_page_only",
        "label": "Home page only",
        "default": true
      },
      {
        "type": "text",
        "id": "text",
        "label": "Text",
        "default": "Announce something here"
      },
      {
        "type": "url",
        "id": "link",
        "label": "Link",
        "info": "Optional"
      },
      {
        "type": "select",
        "id": "color_scheme",
        "label": "Color scheme",
        "options": [
            { "value": "primary", "label": "Primary"},
            { "value": "secondary", "label": "Secondary"},
            { "value": "tertiary", "label": "Tertiary"}
        ],
        "default":   "secondary"
      }
    ]
  }
{% endschema %}
