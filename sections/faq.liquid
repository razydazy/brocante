<!-- /sections/custom-html.liquid -->
{% comment %}theme-check-disable MissingTemplate{% endcomment %}
{%- assign section_color = section.settings.color_scheme -%}
<section class="faq section-y-padding bg-scheme-background text-scheme-text" data-color-scheme="{{ section_color }}">
  <div class="wrapper">
    {% if section.settings.title != '' %}
    <h2 class="font-heading section-title-align {{ settings.section_heading_font_size }}">
      {{ section.settings.title | escape }}
    </h2>
    {% endif %}

    <div class="mx-auto  {% if section.settings.title != '' %}mt-10{% endif %} {% if section.settings.two_columns_desktop %}grid lg:grid-cols-2 lg:gap-10 max-w-7xl{% else %}max-w-2xl{% endif %}">
      {%- for block in section.blocks -%}
        <div class="collapsible-tab -mt-theme-width" {{ block.shopify_attributes }}>
          <div class="{% if forloop.first and section.settings.two_columns_desktop == false %}lg:border-t-theme-width{% endif %} border-b-theme-width border-scheme-border" x-data="{ open: false }" x-cloak>
            <h2 class="{% unless section.settings.heading_text_style == 'heading' %}text-base{% endunless %}" >
              <button @click="open = !open" class="py-4 {% if section.settings.heading_text_style == 'heading' %}font-heading {{ settings.base_heading_size }}{% else %}font-body{% endif %} cursor-pointer flex justify-between items-center w-full text-left" :aria-expanded="open ? true : 'false'">
                <span class="flex items-center justify-start">
                  {{ block.settings.question }}
                </span>
                <span class="inline-block w-5 h-5 flex-shrink-0 transform transition origin-center" :class="{'rotate-180': open }">{%- render 'icon-chevron-down' %}</span>
              </button>
            </h2>
            <div class="py-4 rte" x-show="open" id="{{ block.id }}">
              {{ block.settings.answer }}
            </div>
          </div>
          <noscript>
            <div class="rte mt-8">
              <h2 class="{{ settings.base_heading_size }}"></h2>
              {{ block.settings.answer }}
            </div>
          </noscript>
        </div>
      {%- endfor -%}
    </div>

  </div>
</section>
{% comment %}theme-check-enable MissingTemplate{% endcomment %}

{% schema %}
{
 "name": "FAQ",
  "disabled_on": {
    "groups": ["header", "footer", "aside"]
  },
 "settings": [
   {
    "type":      "text",
    "id":        "title",
    "label":     "Heading",
    "default":   "FAQs"
   },
   {
      "type": "select",
      "id": "heading_text_style",
      "label": "Heading text style",
      "options": [
        {
          "value": "heading",
          "label": "Heading"
        },
        {
          "value": "body",
          "label": "Body"
        }
      ],
      "default": "heading"
    },
    {
      "type": "checkbox",
      "id": "two_columns_desktop",
      "default": true,
      "label": "Two columns on desktop"
    },
    {
      "type":      "header",
      "content":   "Color"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "label": "Color scheme",
      "options": [
          { "value": "primary", "label": "Primary"},
          { "value": "secondary", "label": "Secondary"},
          { "value": "tertiary", "label": "Tertiary"}
      ],
      "default":   "primary"
    }
 ],
 "blocks": [
    {
      "name": "Question",
      "type": "question",
      "settings": [
        {
          "type":      "text",
          "id":        "question",
          "label":     "Question",
          "default":   "Frequently asked question"
         },
         {
          "type":      "richtext",
          "id":        "answer",
          "label":     "Answer",
          "default":   "<p>Use this text to share the answer to the question with your customers.</p>"
         }
      ]
    }
 ],
 "presets": [
     {
       "name": "FAQ",
       "blocks": [
          {
            "type": "question"
          },
          {
            "type": "question"
          },
          {
            "type": "question"
          },
          {
            "type": "question"
          },
          {
            "type": "question"
          },
          {
            "type": "question"
          },
          {
            "type": "question"
          },
          {
            "type": "question"
          }
       ]
     }
   ]
}
{% endschema %}
